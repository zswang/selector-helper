!function(){function e(e){if(!/[{}]/.test(e)){var t=r.innerHTML.replace("{{input}}",e),n=o.firstChild;n?n.nodeValue=t:(n=document.createTextNode(t),o.appendChild(n))}}var t=document.querySelector("#selector_helper");if(t)return t.style.display="",void(t.onshow&&t.onshow());t=document.createElement("div"),t.id="selector_helper",t.innerHTML='    <style></style>\n    <style>#selector_helper{position:fixed;width:300px;border:gray solid 1px;border-radius:3px;left:100px;top:30px;z-index:2012122324}#selector_helper a,#selector_helper button,#selector_helper input,#selector_helper label,#selector_helper li,#selector_helper p,#selector_helper select,#selector_helper textarea,#selector_helper ul{margin:0;padding:0;box-sizing:border-box;font:18px/1.125 Arial,Helvetica,sans-serif}#selector_helper .panel_header{height:24px;line-height:24px;position:relative;background:#24292e;color:#fff;padding:2px 5px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:move}#selector_helper .panel_header .image_logo{float:left;cursor:pointer;color:#fff;text-decoration:none}#selector_helper .panel_header .label_title{float:left;margin-left:5px}#selector_helper .panel_header .btn_close{float:right;cursor:pointer}#selector_helper .list_drop_down{left:30px;font-size:18px;position:absolute;padding:5px;border:gray solid 1px;list-style:none;margin:-5px 0 0 0;background:#fff;display:none}#selector_helper .list_drop_down em{color:red}#selector_helper .list_drop_down .selected{background:#00f;color:#fff}#selector_helper .panel_content{background:#fff;padding:5px}#selector_helper .panel_content .text_query{width:100%;font-size:18px}#selector_helper,#selector_helper *{outline:0;animation:none}@keyframes selector_helper_flash{from{outline-color:#1e90ff;outline-offset:-3px}to{outline-color:red;outline-offset:0}}</style>\n    <style type="text/template">\n      {{input}} {\n        outline: dodgerblue dashed 2px;\n        animation: selector_helper_flash 2s infinite ease-in-out;\n        -webkit-animation: selector_helper_flash 2s infinite ease-in-out;\n      }\n    </style>\n    <div class="panel_header">\n      <a href="https://weibo.com/zswang" target="_blank" class="image_logo">z</a>\n      <span class="label_title">Selector Helper</span>\n      <span class="btn_close">Ã—</span>\n    </div>\n    <div class="panel_content">\n      <input class="text_query">\n    </div>\n    <ul class="list_drop_down">\n      \n    </ul>',document.body.appendChild(t);var n=t.querySelector(".panel_content .text_query");t.onshow=function(){n&&(n.focus(),e(n.value))};var l=function(){var e={},n=[].slice.apply(t.querySelectorAll("*"));return n.push(t),":link:visited:active:hover:focus:first-letter:first-line:first-child:before:afte:lang:first-of-type:last-of-type:only-of-type:only-child:nth-child:nth-last-child:nth-of-type:nth-last-of-type:last-child:root:empty:target:enabled:disabled:checked:not::selection".replace(/:+[\w\-]+/g,function(t){e[t]=!0}),[].slice.apply(document.querySelectorAll("*")).forEach(function(t){if(!(n.indexOf(t)>=0)){var l=t.tagName.toLowerCase();["style","script","link","meta","head","title"].indexOf(l)>=0||(e[l]=!0,[].slice.apply(t.classList).forEach(function(t){e["."+t]=!0}),t.id&&(e["#"+t.id]=!0))}}),Object.keys(e).sort()}(),o=t.querySelector("style");if(o){var r=t.querySelector('style[type="text/template"]');if(r){var i=t.querySelector(".panel_header");if(i){var s,a;i.addEventListener("mousedown",function(e){function n(e){t.style.left=Math.max(0,Math.min(document.documentElement.clientWidth-t.clientWidth,s[0]+(e.screenX-a[0])))+"px",t.style.top=Math.max(0,Math.min(document.documentElement.clientHeight-t.clientHeight,s[1]+(e.screenY-a[1])))+"px"}function l(e){document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",l)}var o=getComputedStyle(t,!0);s=[parseFloat(o.left),parseFloat(o.top)],a=[e.screenX,e.screenY],document.addEventListener("mousemove",n),document.addEventListener("mouseup",l)})}var c=t.querySelector(".panel_header .btn_close");if(c&&c.addEventListener("click",function(){t.style.display="none",n&&e("")}),n){var d=document.querySelector(".list_drop_down"),p=[],u=0;n.addEventListener("input",function(t){e(n.value);var o=n.value.slice(0,n.selectionEnd),r="";p=[],u=0,o.replace(/(::?|#|\.)?([\w\-]*)$/,function(e,t,n){RegExp["$`"];if(n||t){if(n=n.toLowerCase(),p=l.filter(function(e){return e.toLowerCase().indexOf(n)>=0}).sort(function(e,l){if(!t)return e.indexOf(n)-l.indexOf(n);var o=(e.match(/^(::?|#|\.)/)||[""])[0],r=(l.match(/^(::?|#|\.)/)||[""])[0];if(o!==r){if(o===t)return-1;if(r===t)return 1}return e.indexOf(n)-l.indexOf(n)}).slice(0,10),1===p.length&&p[0]===e)return void(p=[]);r=p.map(function(e,t){return"<li"+(0===t?' class="selected"':"")+' style="outline:none;-webkit-animation:none;animation:none">'+e.replace(new RegExp(n,"gi"),"<em>$&</em>")+"</li>"}).join("\n")}}),p.length<=0?d.style.display="":d.style.display="block",d.innerHTML=r}),n.addEventListener("keydown",function(t){function l(e){if(!(p.length<=0)){var t=Math.min(Math.max(0,u+e),p.length-1);if(t!==u){u=t;var n=d.querySelector("li.selected");n&&n.classList.remove("selected");var l=d.querySelector("li:nth-of-type("+(u+1)+")");l&&l.classList.add("selected")}}}switch(t.keyCode){case 38:l(-1);break;case 40:l(1);break;case 9:case 13:!function(){if(!(p.length<=0)){var t=n.value.slice(0,n.selectionEnd),l=n.value.slice(n.selectionEnd),o=t.replace(/(::?|#|\.)?([\w\-]*)$/,p[u]);n.value=o+l,n.selectionEnd=n.value.length-l.length,d.style.display="",e(n.value)}}();break;case 27:d.style.display="";break;default:return}t.preventDefault()})}}}}();